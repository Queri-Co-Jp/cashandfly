<!DOCTYPE html>
<html>
<head>
    <title>Redirecting to CashAndFly...</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>Redirecting to CashAndFly...</h1>
    <p>Please wait while we redirect you back to the app.</p>
    <p id="debug"></p>

    <script>
        // Get the current URL with all parameters
        const currentUrl = window.location.href;

        // Extract just the query parameters (everything after ?)
        const urlParams = window.location.search;

        // Build proper app URL with custom scheme
        const appUrl = "com.cashandfly.app:/oauth/callback" + urlParams;

        console.log("Current URL:", currentUrl);
        console.log("App URL:", appUrl);

        // Show debug info
        document.getElementById('debug').innerHTML =
            '<strong>Current URL:</strong> ' + currentUrl + '<br>' +
            '<strong>Redirecting to:</strong> ' + appUrl;

        // Redirect to app
        window.location.href = appUrl;

        // Fallback message after 3 seconds
        setTimeout(function() {
            document.body.innerHTML = '<h1>Unable to open app automatically</h1><p>Please make sure CashAndFly is installed.</p><p>Redirect URL: <code>' + appUrl + '</code></p>';
        }, 3000);
    </script>
</body>
</html>
